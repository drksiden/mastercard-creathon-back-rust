#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./test_api.sh

API_URL="http://localhost:3000/api"

echo "üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Payment Analytics API"
echo "======================================"
echo ""

# 1. Health Check
echo "1. Health Check:"
curl -s "$API_URL/health" | jq '.' || echo "–û—à–∏–±–∫–∞: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ jq —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
echo ""
echo "---"
echo ""

# 2. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
echo "2. –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å: '–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π?'"
curl -s -X POST "$API_URL/query" \
  -H "Content-Type: application/json" \
  -d '{"question": "–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –±–∞–∑–µ?"}' | jq '.'
echo ""
echo "---"
echo ""

# 3. –ó–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
echo "3. –ó–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π: '–¢–æ–ø 5 –º–µ—Ä—á–∞–Ω—Ç–æ–≤ –ø–æ –æ–±—ä–µ–º—É'"
curl -s -X POST "$API_URL/query" \
  -H "Content-Type: application/json" \
  -d '{"question": "–¢–æ–ø 5 –º–µ—Ä—á–∞–Ω—Ç–æ–≤ –ø–æ –æ–±—ä–µ–º—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"}' | jq '.'
echo ""
echo "---"
echo ""

# 4. –ó–∞–ø—Ä–æ—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
echo "4. –ó–∞–ø—Ä–æ—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º: '–û–±—ä–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º MCC'"
curl -s -X POST "$API_URL/query" \
  -H "Content-Type: application/json" \
  -d '{"question": "–û–±—ä–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º MCC"}' | jq '.'
echo ""


# üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Ollama –ª–æ–∫–∞–ª—å–Ω–æ, –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å API —Ç–æ–∂–µ –ª–æ–∫–∞–ª—å–Ω–æ, –∞ –≤ Docker –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ Docker

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π compose —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –¥–ª—è –ë–î
docker compose -f docker-compose.db-only.yml up -d

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (API –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)
docker compose up -d db
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Docker)
DATABASE_URL=postgresql://postgres:password@localhost:5432/payment_analytics

# LLM Provider
LLM_PROVIDER=ollama

# Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π)
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=mixtral:8x7b-instruct  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
RUST_LOG=info

# –°–µ—Ä–≤–µ—Ä
HOST=0.0.0.0
PORT=3000
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –°–±–æ—Ä–∫–∞ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–±—Ä–∞–Ω–æ)
cargo build --release

# –ó–∞–ø—É—Å–∫
cargo run --release

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
./target/release/payment-analytics-backend
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose ps db

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Ollama —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:11434/api/tags

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl http://localhost:3000/api/health

# 4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
curl -X POST http://localhost:3000/api/query \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–°–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π?",
    "include_analysis": true,
    "include_sql": false
  }'
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

‚úÖ –ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (hot reload, –æ—Ç–ª–∞–¥–∫–∞)  
‚úÖ –ü—Ä–æ—â–µ –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º  
‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Å–µ—Ç–µ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Docker  
‚úÖ –ú–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤  
‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Ollama –Ω–∞ —Ö–æ—Å—Ç–µ  

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   API (Rust)    ‚îÇ ‚Üê –õ–æ–∫–∞–ª—å–Ω–æ, cargo run
‚îÇ   Port: 3000    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚Üí PostgreSQL (Docker)
         ‚îÇ    Port: 5432
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚Üí Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π)
              Port: 11434
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –ë–î
docker compose -f docker-compose.db-only.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–î
docker compose -f docker-compose.db-only.yml down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ë–î
docker compose -f docker-compose.db-only.yml logs -f db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ë–î
docker compose -f docker-compose.db-only.yml restart db
```

## Troubleshooting

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker compose ps db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql postgresql://postgres:password@localhost:5432/payment_analytics

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs db
```

### Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω
curl http://localhost:11434/api/tags

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
ollama list

# –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
ollama pull mixtral:8x7b-instruct
```

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ .env
PORT=3001

# –ò–ª–∏ –Ω–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç
lsof -i :3000
```


#!/bin/bash

# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ API —Å –∞–Ω–∞–ª–∏–∑–æ–º –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

API_URL="http://localhost:3000/api/query"

echo "üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API —Å –∞–Ω–∞–ª–∏–∑–æ–º –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
echo "========================================================"
echo ""

# –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å —Å –∞–Ω–∞–ª–∏–∑–æ–º
echo "1Ô∏è‚É£  –ó–∞–ø—Ä–æ—Å —Å LLM-–∞–Ω–∞–ª–∏–∑–æ–º:"
echo "---------------------------"
curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–°–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±—ã–ª–æ —Å–µ–≥–æ–¥–Ω—è?",
    "include_analysis": true
  }' | jq '.'
echo ""
echo ""

# –ü—Ä–∏–º–µ—Ä 2: –ó–∞–ø—Ä–æ—Å —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
echo "2Ô∏è‚É£  –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (–±—É–¥–µ—Ç –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω):"
echo "----------------------------------------"
curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–¢–æ–ø-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π MCC –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
    "use_cache": true
  }' | jq '{question, row_count, execution_time_ms, cached}'
echo ""

echo "3Ô∏è‚É£  –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å (–∏–∑ –∫—ç—à–∞):"
echo "-----------------------------"
curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–¢–æ–ø-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π MCC –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
    "use_cache": true
  }' | jq '{question, row_count, execution_time_ms, cached}'
echo ""
echo ""

# –ü—Ä–∏–º–µ—Ä 3: –°–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å —Å –∞–Ω–∞–ª–∏–∑–æ–º
echo "4Ô∏è‚É£  –°–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –∞–Ω–∞–ª–∏–∑–æ–º:"
echo "-------------------------------"
curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –¥–Ω—è–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é",
    "include_analysis": true,
    "use_cache": true
  }' | jq '{question, sql, row_count, analysis: {headline, insights: .analysis.insights[0:2], chart_type}}'
echo ""
echo ""

# –ü—Ä–∏–º–µ—Ä 4: –ó–∞–ø—Ä–æ—Å –±–µ–∑ –∫—ç—à–∞ (–¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –¥–∞–Ω–Ω—ã—Ö)
echo "5Ô∏è‚É£  –ó–∞–ø—Ä–æ—Å –±–µ–∑ –∫—ç—à–∞ (—Ä–µ–∞–ª-—Ç–∞–π–º):"
echo "----------------------------------"
curl -s -X POST "$API_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–°–∫–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å?",
    "use_cache": false
  }' | jq '{question, row_count, execution_time_ms, cached}'
echo ""

echo "‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!"
echo ""
echo "üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. ANALYSIS.md"

